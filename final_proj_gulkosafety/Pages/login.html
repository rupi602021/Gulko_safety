<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <script src="../Scripts/ajaxCallsWithKey.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

    <script src="../Scripts/jquery-3.4.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <link href="styles/loginStyleSheet.css" rel="stylesheet" />

    <title>login-Gulkosafety</title>

    <script>
        function checkUser() {
            email = $("#exampleInputEmail").val();
            password = $("#exampleInputPassword").val();
            let api = "../api/user/" + email + "/" + password;
            ajaxCall("GET", api, "", getUserSuccess, getUserError)
        }
        function getUserSuccess(user) {
            if (user.Email == null) {
                alert("אחד מפרטי ההתחברות לא תקין")
            }
            else {
                console.log(user)
                localStorage["user"] = JSON.stringify(user);
                if (user.User_type_num == 1) {
                    window.location = "home.html";
                }
                else {
                    window.location = "projects.html";
                }
                alert("שלום" + " " + user.Name)
            }

        }

        function getUserError() {
            alert("erorr")
        }

    </script>

</head>

<body>
    <p class="imgcontainer">
        <img src="photos/logo.jpeg" alt="Avatar" class="avatar">
    </p>
    <div class="main">
        <p class="sign" align="center">התחברות</p>
        <form class="form1">
          
            <input class="un " type="text" align="center" id="exampleInputEmail" placeholder="הכנס אימייל" pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$" required="required"
                   oninvalid="this.setCustomValidity('הכנס את האימייל שלך- שים לב לתבנית')"
                   oninput="this.setCustomValidity('')">
            <input class="pass" type="password" align="center" id="exampleInputPassword" placeholder="הכנס סיסמא">
           
            <a class="submit" onclick="checkUser()" align="center">כניסה</a>

        </form>

    </div>

</body>
</html>